import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
import path from "path";

// If you use the react-router Vite plugin, uncomment the next line and add reactRouter() to plugins:
// import { reactRouter } from "@react-router/dev/vite";

export default defineConfig({
	plugins: [
		// If you use reactRouter(), add it here:
		// reactRouter(),
		react()
	],
	base: "/", // use "./" only if you must host on a subpath or file://
	build: {
		outDir: "build/client",
		emptyOutDir: true,
		rollupOptions: {
			// Ensure the root index.html is considered an input and copied to the output
			input: {
				main: path.resolve(__dirname, "index.html")
			}
		}
	},
	ssr: {
		// keep these only if you need them for SSR builds
		noExternal: ["react-router", "react-router-dom"]
	}
});

import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
import path from "path";

export default defineConfig({
	plugins: [
		react(),
		// add reactRouter() here if you already use it:
		// reactRouter()
	],

	// base: set to '/' for root hosting; use './' if you must have relative assets
	base: "/",

	build: {
		// output the client static site here
		outDir: "build/client",
		emptyOutDir: true,

		// ensure index.html (project root) is treated as an input and copied
		rollupOptions: {
			input: {
				main: path.resolve(__dirname, "index.html")
			}
		}
	},

	// keep the SSR settings you need (optional)
	ssr: {
		// only if you need these packages bundled for SSR builds
		noExternal: ["react-router", "react-router-dom"]
	}
});
